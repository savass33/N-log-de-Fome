generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model cliente {
  id_cliente Int      @id @default(autoincrement())
  nome       String?  @db.VarChar(100)
  telefone   String?  @db.VarChar(15)
  endereco   String?  @db.VarChar(100)
  email      String?  @db.VarChar(100)
  pedido     pedido[]
}

model entregador {
  id_entregador  Int                        @id @default(autoincrement())
  nome           String?                    @db.VarChar(100)
  status_entrega entregador_status_entrega? @default(Caminho)
}

model itempedido {
  id_item      Int     @id @default(autoincrement())
  id_pedido_fk Int
  descri__o    String? @map("descrição") @db.VarChar(200)
  quantidade   Int
  preco        Float   @db.Float
  pedido       pedido  @relation(fields: [id_pedido_fk], references: [id_pedido], onDelete: Cascade, onUpdate: NoAction, map: "fk_id_pedido")

  @@index([id_pedido_fk], map: "fk_id_pedido")
}

model pedido {
  id_pedido         Int                   @id @default(autoincrement())
  id_cliente_fk     Int
  id_restaurante_fk Int
  data_hora         DateTime              @db.DateTime(0)
  status_pedido     pedido_status_pedido? @default(Pendente)
  itempedido        itempedido[]
  cliente           cliente               @relation(fields: [id_cliente_fk], references: [id_cliente], onDelete: NoAction, onUpdate: NoAction, map: "fk_id_cliente")
  restaurante       restaurante           @relation(fields: [id_restaurante_fk], references: [id_restaurante], onDelete: Cascade, onUpdate: NoAction, map: "fk_id_restaurante")

  @@index([id_cliente_fk], map: "fk_id_cliente")
  @@index([id_restaurante_fk], map: "fk_id_restaurante")
}

model restaurante {
  id_restaurante Int             @id @default(autoincrement())
  nome           String?         @db.VarChar(100)
  telefone       String?         @db.VarChar(15)
  tipo_cozinha   String?         @db.VarChar(50)
  endereco       String?         @db.VarChar(100)
  email          String?         @db.VarChar(100)
  item_cardapio  item_cardapio[]
  pedido         pedido[]
}

model admin {
  id_admin Int     @id @default(autoincrement())
  nome     String? @db.VarChar(100)
  email    String? @db.VarChar(100)
  telefone String? @db.VarChar(15)
}

model item_cardapio {
  id_item_cardapio  Int         @id @default(autoincrement())
  id_restaurante_fk Int
  nome              String      @db.VarChar(100)
  descricao         String?     @db.VarChar(255)
  preco             Float       @db.Float
  categoria         String?     @db.VarChar(50)
  imagem_url        String?     @db.VarChar(255)
  restaurante       restaurante @relation(fields: [id_restaurante_fk], references: [id_restaurante], onDelete: Cascade, onUpdate: NoAction, map: "fk_cardapio_restaurante")

  @@index([id_restaurante_fk], map: "fk_cardapio_restaurante")
}

enum entregador_status_entrega {
  Entregue
  Caminho
}

enum pedido_status_pedido {
  Pendente
  Preparando
  Caminho
  Entregue
  Cancelado
}
